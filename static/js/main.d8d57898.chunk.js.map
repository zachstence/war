{"version":3,"sources":["Deck/Deck.ts","components/Card/Card.tsx","components/Game/Game.tsx","components/App.tsx","index.tsx"],"names":["SUITS","RANKS","Deck","cards","this","init","suit","rank","push","card","shift","Error","i","length","j","Math","floor","random","half1","slice","half2","suitToChar","rankToChar","toString","Card","faceUp","className","Game","useState","p1Deck","setP1Deck","p1Played","setP1Played","p2Deck","setP2Deck","p2Played","setP2Played","isWar","setIsWar","canPlay","setCanPlay","winner","setWinner","undefined","fullDeck","shuffle","split","d1","d2","useEffect","renderCards","played","map","size","onClick","draw","p1Card","p2Card","pushBottom","App","href","src","alt","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d8d57898.chunk.js","sourcesContent":["const SUITS = ['spades', 'hearts', 'diamonds', 'clubs'] as const;\nexport type Suit = (typeof SUITS)[number];\n\nconst RANKS = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13] as const;\nexport type Rank =  (typeof RANKS)[number];\n\n/**\n * A representation of a standard playing card with a suit (Spades, Hearts, Diamonds, or Clubs),\n * and a rank (A, 2-10, J, Q, or K).\n */\nexport interface CardInfo {\n    suit: Suit;\n    rank: Rank;\n}\n\n/**\n * A deck of a subset of 52 playing cards. Cards can be drawn from the top and added back to the bottom of the deck.\n */\nclass Deck {\n    private cards: CardInfo[] = [];\n\n    /**\n     * Create a new deck. If cards are specified, they are used in the deck. If not, the deck is initialized\n     * with the standard 52 playing cards in order.\n     * @param cards The (optional) cards to initialize the deck with.\n     */\n    constructor(cards?: CardInfo[]) {\n        if (cards) {\n            this.cards = cards;\n        } else {\n            this.init();\n        }\n    }\n\n    /**\n     * Initializes the deck with one of each of the standard 52 playing cards.\n     */\n    private init(): void {\n        for (const suit of SUITS) {\n            for (const rank of RANKS) {\n                this.cards.push({suit, rank});\n            }\n        }\n    }\n\n    /**\n     * Removes and returns the card on top of the deck.\n     * @returns The card that was drawn.\n     * @throws An error if the deck is empty when drawing.\n     */\n    draw(): CardInfo {\n        const card = this.cards.shift();\n        if (!card) throw new Error(\"Cannot draw from an empty deck\");\n        return card;\n    }\n\n    /**\n     * Adds cards to the bottom of the deck.\n     * @param cards The cards to add to the bottom of the deck.\n     */\n    pushBottom(...cards: CardInfo[]): void {\n        this.cards.push(...cards);\n    }\n\n    /**\n     * Shuffles the deck using a modernized version of the Fisher-Yates algorithm.\n     * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle#The_modern_algorithm\n     */\n    shuffle(): void {\n        for (let i = this.cards.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];\n        }\n    }\n\n    /**\n     * Splits the deck evenly into two halves. If the deck contains an odd number of cards,\n     * the second half will contain one more card than the first half.\n     * @returns A 2-element array containing the two halves of the deck.\n     */\n    split(): [Deck, Deck] {\n        const half1 = this.cards.slice(0, (this.cards.length) / 2);\n        const half2 = this.cards.slice(this.cards.length / 2, this.cards.length);\n        return [\n            new Deck(half1),\n            new Deck(half2)\n        ];\n    }\n\n    /**\n     * Gets the cards in the deck.\n     * @returns The cards in the deck.\n     */\n    getCards(): CardInfo[] {\n        return this.cards;\n    }\n\n    /**\n     * The number of cards in the deck.\n     * @returns the number of cards in the deck.\n     */\n    size(): number {\n        return this.cards.length;\n    }\n}\n\nexport default Deck;","import React from \"react\";\nimport \"./Card.scss\";\nimport { CardInfo, Rank, Suit } from \"../../Deck/Deck\";\n\n/**\n * Converts a Suit to a character to show on a card.\n * @param suit The suit to convert to a character.\n * @returns An ASCII character representation of the given suit.\n */\nconst suitToChar = (suit: Suit): string => {\n    switch (suit) {\n        case \"spades\": return \"♠\";\n        case \"hearts\": return \"♥\";\n        case \"diamonds\": return \"♦\";\n        case \"clubs\": return \"♣\";\n    }\n}\n\n/**\n * Converts a Rank to a character to show on a card.\n * 1 becomes A, 2-10 are unchanged, 11 becomes J, 12 becomes Q, and 13 becomes K.\n * @param rank The rank to convert to a character.\n * @returns  An ASCII character representation of the given rank.\n */\nconst rankToChar = (rank: Rank): string => {\n    switch (rank) {\n        case 1:\n            return \"A\";\n        case 2:\n        case 3:\n        case 4:\n        case 5:\n        case 6:\n        case 7:\n        case 8:\n        case 9:\n        case 10:\n            return rank.toString();\n        case 11:\n            return \"J\";\n        case 12:\n            return \"Q\";\n        case 13:\n            return \"K\";\n    }\n}\n\nexport interface CardProps extends CardInfo {\n    faceUp: boolean;\n}\n\n/**\n * Renders a playing card with a given suit and rank. The suit and rank are not rendered\n * if faceUp=false.\n */\nconst Card: React.FC<CardProps> = ({rank, suit, faceUp}) => {\n    if (faceUp) {\n        return (\n            <div className=\"card\">\n                {rankToChar(rank)}{suitToChar(suit)}\n            </div>\n        );\n    } else {\n        return (\n            <div className=\"card face-down\" />\n        )\n    }\n};\n\nexport default Card;","import React, { ReactElement, useEffect, useState } from \"react\";\nimport Deck from \"../../Deck/Deck\";\nimport Card, { CardProps } from \"../Card/Card\";\nimport \"./Game.scss\";\n\n/**\n * Renders a playable War game, where two players fight cards against each other.\n * Rules: https://bicyclecards.com/how-to-play/war/\n */\nconst Game: React.FC = () => {\n    const [p1Deck, setP1Deck] = useState<Deck>();\n    const [p1Played, setP1Played] = useState<CardProps[]>([]);\n\n    const [p2Deck, setP2Deck] = useState<Deck>();\n    const [p2Played, setP2Played] = useState<CardProps[]>([]);\n\n    const [isWar, setIsWar] = useState<boolean>(false);\n\n    const [canPlay, setCanPlay] = useState<boolean>(true);\n\n    const [winner, setWinner] = useState<number>();\n\n    /**\n     * Sets up each player with half of a standard deck of playing cards.\n     */\n    const init = (): void => {\n        setWinner(undefined);\n        setIsWar(false);\n        setP1Played([]);\n        setP2Played([]);\n        \n        const fullDeck = new Deck();\n        fullDeck.shuffle();\n\n        const [d1, d2] = fullDeck.split();\n        setP1Deck(d1);\n        setP2Deck(d2);\n\n        setCanPlay(true);\n    }\n\n    // Initialize on component mount\n    useEffect(init, []);\n\n    /**\n     * Plays one card from each player, or plays 2 cards in the event of a \"war\".\n     */\n    const play = (): void => {\n        if (!p1Deck || !p2Deck) throw new Error(\"Cannot play with an empty deck\");\n\n        setCanPlay(false);\n\n        if (!isWar) { // If not war, each player draws and plays 1 card\n            // Check to make sure players have enough cards to play\n            if (p1Deck.size() < 1) setWinner(2);\n            if (p2Deck.size() < 1) setWinner(1);\n\n            setP1Played([{...p1Deck.draw(), faceUp: true}]);\n            setP2Played([{...p2Deck.draw(), faceUp: true}]);\n        } else { // If war, each player draws and plays a face down card, then a face up card\n            if (!p1Played || !p2Played) throw new Error();\n\n            // Check to make sure players have enough cards to play\n            if (p1Deck.size() < 2) setWinner(2);\n            if (p2Deck.size() < 2) setWinner(1);\n            \n\n            setP1Played([\n                ...p1Played,\n                {...p1Deck.draw(), faceUp: false},\n                {...p1Deck.draw(), faceUp: true}\n            ]);\n            setP2Played([\n                ...p2Played,\n                {...p2Deck.draw(), faceUp: false},\n                {...p2Deck.draw(), faceUp: true}\n            ]);\n        }\n    };\n\n    /**\n     * Evaluates the cards played by each player and determines who wins the round, then resets\n     * the played cards so players can play another round.\n     * Ends the game if either player has 0 cards in their deck.\n     */\n    const evaluate = (): void => {\n        if (!p1Played || !p2Played || !p1Deck || !p2Deck) throw new Error(\"Cannot evaluate with empty played cards or empty deck\");\n\n        const p1Card = p1Played[p1Played.length - 1];\n        const p2Card = p2Played[p2Played.length - 1];\n\n        if (p1Card.rank === p2Card.rank) { // If ranks are equal, enter war state\n            setIsWar(true);\n        } else {\n            if (p1Card.rank > p2Card.rank) { // Player 1 wins this round\n                p1Deck.pushBottom(...p1Played, ...p2Played);\n            } else if (p2Card.rank > p1Card.rank) { // Player 2 wins this round\n                p2Deck.pushBottom(...p2Played, ...p1Played);\n            }\n\n            setP1Played([]);\n            setP2Played([]);\n            setIsWar(false);\n            \n            if (p1Deck.size() === 0) setWinner(2);\n            if (p2Deck.size() === 0) setWinner(1);\n        }\n\n        setCanPlay(true);\n    };\n\n    /**\n     * Renders a player's played cards.\n     * @param played The props of cards to render.\n     */\n    const renderCards = (played: CardProps[]): ReactElement[] => {\n        return played.map(card => (\n            <Card key={`${card.rank}${card.suit}`} {...card} />\n        ));\n    }\n\n    if (!winner && p1Deck && p2Deck) {\n        return (\n            <main className={`game${isWar ? \" war\" : \"\"}`}>\n                <div className=\"player\">\n                    <h2>PLAYER 1</h2>\n                    <p>{p1Deck.size()} cards remaining</p>\n                    <div className=\"played-cards\">{renderCards(p1Played)}</div>\n                </div>\n                <div className=\"middle\">\n                    {canPlay\n                        ? <button onClick={play}>Play</button>\n                        : <button onClick={evaluate}>Evaluate</button>}\n                </div>\n                <div className=\"player\">\n                    <h2>PLAYER 2</h2>\n                    <p>{p2Deck.size()} cards remaining</p>\n                    <div className=\"played-cards\">{renderCards(p2Played)}</div>\n                </div>\n            </main>\n        )\n    } else if (winner) {\n        return (\n            <main className=\"game-over\">\n                <h2>Game Over</h2>\n                {p1Deck?.size() === 0 ? <h3>Player 2 Won!</h3> : <h3>Player 1 Won!</h3>}\n                <button onClick={init}>Play Again</button>\n            </main>\n        );\n    } else {\n        return null;\n    }\n\n};\n\nexport default Game;","import React from 'react';\nimport Game from './Game/Game';\n\nimport \"./App.scss\";\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"app\">\n      <header><h1>WAR</h1></header>\n      <Game />\n      <footer>\n        <a href=\"https://github.com/zachstence/war\">\n          <img src=\"github.png\" alt=\"GitHub Icon\"/>\n        </a>\n      </footer>\n    </div>\n  )\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}